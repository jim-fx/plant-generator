function t(){}function n(t){return t()}function e(){return Object.create(null)}function i(t){t.forEach(n)}function r(t){return"function"==typeof t}function o(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function s(t,n){t.appendChild(n)}function u(t,n,e){t.insertBefore(n,e||null)}function a(t){t.parentNode.removeChild(t)}function h(t){return document.createElement(t)}function c(t){return document.createTextNode(t)}function l(){return c(" ")}function f(t,n,e,i){return t.addEventListener(n,e,i),()=>t.removeEventListener(n,e,i)}function d(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function p(t){return""===t?void 0:+t}function v(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function y(t,n){t.value=null==n?"":n}function m(t,n,e){t.classList[e?"add":"remove"](n)}let b;function g(t){b=t}function x(){if(!b)throw new Error("Function called outside component initialization");return b}function w(t){x().$$.on_mount.push(t)}function k(){const t=x();return(n,e)=>{const i=t.$$.callbacks[n];if(i){const r=function(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}(n,e);i.slice().forEach(n=>{n.call(t,r)})}}}const $=[],M=[],A=[],E=[],T=Promise.resolve();let q=!1;function C(t){A.push(t)}let R=!1;const _=new Set;function O(){if(!R){R=!0;do{for(let t=0;t<$.length;t+=1){const n=$[t];g(n),S(n.$$)}for($.length=0;M.length;)M.pop()();for(let t=0;t<A.length;t+=1){const n=A[t];_.has(n)||(_.add(n),n())}A.length=0}while($.length);for(;E.length;)E.pop()();q=!1,R=!1,_.clear()}}function S(t){if(null!==t.fragment){t.update(),i(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(C)}}const L=new Set;const P="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function j(t,n){-1===t.$$.dirty[0]&&($.push(t),q||(q=!0,T.then(O)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function z(o,s,u,h,c,l,f=[-1]){const d=b;g(o);const p=s.props||{},v=o.$$={fragment:null,ctx:null,props:l,update:t,not_equal:c,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:e(),dirty:f,skip_bound:!1};let y=!1;if(v.ctx=u?u(o,p,(t,n,...e)=>{const i=e.length?e[0]:n;return v.ctx&&c(v.ctx[t],v.ctx[t]=i)&&(!v.skip_bound&&v.bound[t]&&v.bound[t](i),y&&j(o,t)),n}):[],v.update(),y=!0,i(v.before_update),v.fragment=!!h&&h(v.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);v.fragment&&v.fragment.l(t),t.forEach(a)}else v.fragment&&v.fragment.c();s.intro&&((m=o.$$.fragment)&&m.i&&(L.delete(m),m.i(x))),function(t,e,o){const{fragment:s,on_mount:u,on_destroy:a,after_update:h}=t.$$;s&&s.m(e,o),C(()=>{const e=u.map(n).filter(r);a?a.push(...e):i(e),t.$$.on_mount=[]}),h.forEach(C)}(o,s.target,s.anchor),O()}var m,x;g(d)}let X;function Y(n){let e,r,o,p,b,g,x,w;return{c(){e=h("div"),r=h("output"),o=c(n[0]),b=l(),g=h("input"),this.c=t,d(r,"style",p=`left: ${(n[0]-n[1])/Math.abs(n[1]-n[2])*90}%`),m(r,"isActive",n[4]),d(g,"type","range"),d(g,"min",n[1]),d(g,"step",n[3]),d(g,"max",n[2])},m(t,i){u(t,e,i),s(e,r),s(r,o),s(e,b),s(e,g),y(g,n[0]),x||(w=[f(g,"focus",n[6]),f(g,"blur",n[7]),f(g,"input",n[5]),f(g,"change",n[8]),f(g,"input",n[8])],x=!0)},p(t,[n]){1&n&&v(o,t[0]),7&n&&p!==(p=`left: ${(t[0]-t[1])/Math.abs(t[1]-t[2])*90}%`)&&d(r,"style",p),16&n&&m(r,"isActive",t[4]),2&n&&d(g,"min",t[1]),8&n&&d(g,"step",t[3]),4&n&&d(g,"max",t[2]),1&n&&y(g,t[0])},i:t,o:t,d(t){t&&a(e),x=!1,i(w)}}}function H(t,n,e){let{min:i=0}=n,{max:r=100}=n,{step:o=1}=n,{value:s=50}=n,u=!1;return t.$$set=t=>{"min"in t&&e(1,i=t.min),"max"in t&&e(2,r=t.max),"step"in t&&e(3,o=t.step),"value"in t&&e(0,s=t.value)},[s,i,r,o,u,function(t){const n=new CustomEvent("change",{detail:parseFloat(s),bubbles:!0,cancelable:!0,composed:!0});this.dispatchEvent(n)},()=>e(4,u=!0),()=>e(4,u=!1),function(){s=p(this.value),e(0,s)}]}"function"==typeof HTMLElement&&(X=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,n,e){this[t]=e}$destroy(){!function(t,n){const e=t.$$;null!==e.fragment&&(i(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});class I extends X{constructor(t){super(),this.shadowRoot.innerHTML="<style>div{position:relative;margin:0px;margin-bottom:12px;padding-top:6px}input[type='range']{position:absolute;-webkit-appearance:none;width:100%;background:transparent;margin:0}input[type='range']:focus{outline:none}input[type='range']::-webkit-slider-runnable-track{width:100%;height:2px;cursor:pointer;background:#4b4b4b;border-radius:1.4px}input[type='range']::-webkit-slider-thumb{height:8px;width:8px;border-radius:50px;background:#4b4b4b;cursor:pointer;-webkit-appearance:none;margin-top:-3.2px}input[type='range']:hover::-webkit-slider-thumb{box-shadow:0px 0px 5px rgba(0, 0, 0, 0.5)}input[type='range']:focus::-webkit-slider-runnable-track{background:#585858}input[type='range']::-moz-range-track{width:100%;height:2px;cursor:pointer;background:#4b4b4b;border-radius:1.4px;border:0px solid rgba(1, 1, 1, 0)}input[type='range']::-moz-range-thumb{height:8px;width:8px;border-radius:50px;background:#4b4b4b;cursor:pointer}input[type='range']::-ms-track{width:100%;height:2px;cursor:pointer;background:transparent;border-color:transparent;color:transparent}input[type='range']::-ms-fill-lower{background:#3e3e3e;border-radius:2.8px}input[type='range']::-ms-fill-upper{background:#4b4b4b;border-radius:2.8px}input[type='range']::-ms-thumb{height:8px;width:8px;border-radius:50px;background:#4b4b4b;cursor:pointer;height:2px}input[type='range']:focus::-ms-fill-lower{background:#4b4b4b}input[type='range']:focus::-ms-fill-upper{background:#585858}output{position:absolute;display:inline;pointer-events:none;font-size:0.7em;color:#cccccc;text-shadow:0px 0px 2px black;top:-1.2em;opacity:0;transform:translateY(5px);transition:transform 0.3s ease, opacity 0.3s ease}div:hover>output{transform:translateY(0px);opacity:1}</style>",z(this,{target:this.shadowRoot},H,Y,o,{min:1,max:2,step:3,value:0}),t&&(t.target&&u(t.target,this,t.anchor),t.props&&(this.$set(t.props),O()))}static get observedAttributes(){return["min","max","step","value"]}get min(){return this.$$.ctx[1]}set min(t){this.$set({min:t}),O()}get max(){return this.$$.ctx[2]}set max(t){this.$set({max:t}),O()}get step(){return this.$$.ctx[3]}set step(t){this.$set({step:t}),O()}get value(){return this.$$.ctx[0]}set value(t){this.$set({value:t}),O()}}function U(n){let e,r,o,c,v,m,b,g;return{c(){e=h("div"),r=h("button"),o=l(),c=h("input"),v=l(),m=h("button"),this.c=t,d(c,"step",n[3]),d(c,"max",n[2]),d(c,"min",n[1]),d(c,"type","number"),d(m,"class","plus")},m(t,i){u(t,e,i),s(e,r),s(e,o),s(e,c),n[7](c),y(c,n[0]),s(e,v),s(e,m),b||(g=[f(r,"click",n[6]),f(c,"input",n[8]),f(m,"click",n[9])],b=!0)},p(t,[n]){8&n&&d(c,"step",t[3]),4&n&&d(c,"max",t[2]),2&n&&d(c,"min",t[1]),1&n&&p(c.value)!==t[0]&&y(c,t[0])},i:t,o:t,d(t){t&&a(e),n[7](null),b=!1,i(g)}}}function D(t,n,e){k();let i,{min:r=-1/0}=n,{max:o=1/0}=n,{step:s=1}=n,{value:u=0}=n;function a(t){e(0,u=Math.max(r,Math.min(+u+t,o)))}return t.$$set=t=>{"min"in t&&e(1,r=t.min),"max"in t&&e(2,o=t.max),"step"in t&&e(3,s=t.step),"value"in t&&e(0,u=t.value)},t.$$.update=()=>{1&t.$$.dirty&&void 0!==u&&function(){const t=new CustomEvent("change",{detail:parseFloat(u),bubbles:!0,cancelable:!0,composed:!0});i&&i.dispatchEvent(t)}()},[u,r,o,s,i,a,()=>a(-s),function(t){M[t?"unshift":"push"](()=>{i=t,e(4,i)})},function(){u=p(this.value),e(0,u)},()=>a(+s)]}customElements.define("plant-slider",I);class F extends X{constructor(t){super(),this.shadowRoot.innerHTML="<style>input[type='number']{-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield}input[type='number']::-webkit-inner-spin-button,input[type='number']::-webkit-outer-spin-button{-webkit-appearance:none}div{position:relative;width:100%;display:flex;background-color:#4b4b4b;border-radius:2px;font-family:'Nunito Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI',\n      Roboto, 'Oxygen-Sans', Ubuntu, Cantarell, 'Helvetica Neue', sans-serif}div,div *{box-sizing:border-box}div button{outline:none;background-color:transparent;border:none;width:10%;cursor:pointer;margin:0;margin:0 2%;position:relative}div button:before,div button:after{display:inline-block;position:absolute;content:'';width:80%;height:1.5px;background-color:white;border-radius:4px;transform:translate(-50%, -50%)}div button.plus:after{transform:translate(-50%, -50%) rotate(90deg)}div input[type='number']{color:white;background-color:transparent;padding:8%;width:72%;font-size:0.6em;font-weight:bold;text-align:center;border:none;border-style:none}</style>",z(this,{target:this.shadowRoot},D,U,o,{min:1,max:2,step:3,value:0}),t&&(t.target&&u(t.target,this,t.anchor),t.props&&(this.$set(t.props),O()))}static get observedAttributes(){return["min","max","step","value"]}get min(){return this.$$.ctx[1]}set min(t){this.$set({min:t}),O()}get max(){return this.$$.ctx[2]}set max(t){this.$set({max:t}),O()}get step(){return this.$$.ctx[3]}set step(t){this.$set({step:t}),O()}get value(){return this.$$.ctx[0]}set value(t){this.$set({value:t}),O()}}function B(t,n,e){const i=t.slice();return i[12]=n[e],i}function Z(n){let e,i,r;return{c(){e=h("div"),e.textContent="none",d(e,"id","selected-value")},m(t,o){u(t,e,o),i||(r=f(e,"click",n[4]),i=!0)},p:t,d(t){t&&a(e),i=!1,r()}}}function N(t){let n,e,i,r;return{c(){n=h("div"),e=c(t[0]),d(n,"id","selected-value")},m(o,a){u(o,n,a),s(n,e),i||(r=f(n,"click",t[4]),i=!0)},p(t,n){1&n&&v(e,t[0])},d(t){t&&a(n),i=!1,r()}}}function V(t){let n,e=t[3],i=[];for(let n=0;n<e.length;n+=1)i[n]=W(B(t,e,n));return{c(){n=h("div");for(let t=0;t<i.length;t+=1)i[t].c();d(n,"id","item-wrapper")},m(t,e){u(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,r){if(41&r){let o;for(e=t[3],o=0;o<e.length;o+=1){const s=B(t,e,o);i[o]?i[o].p(s,r):(i[o]=W(s),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=e.length}},d(t){t&&a(n),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(i,t)}}}function W(t){let n,e,i,r,o,p,y=t[12]+"";function m(...n){return t[8](t[12],...n)}return{c(){n=h("p"),e=c(y),i=l(),d(n,"style",r="opacity: "+(t[12]===t[0]?.5:1)),d(n,"class","item")},m(t,r){u(t,n,r),s(n,e),s(n,i),o||(p=f(n,"click",m),o=!0)},p(i,o){t=i,8&o&&y!==(y=t[12]+"")&&v(e,y),9&o&&r!==(r="opacity: "+(t[12]===t[0]?.5:1))&&d(n,"style",r)},d(t){t&&a(n),o=!1,p()}}}function G(n){let e,i;function r(t,n){return void 0!==t[0]?N:Z}let o=r(n),c=o(n),f=n[1]&&V(n);return{c(){e=h("div"),c.c(),i=l(),f&&f.c(),this.c=t,d(e,"id","main")},m(t,r){u(t,e,r),c.m(e,null),s(e,i),f&&f.m(e,null),n[9](e)},p(t,[n]){o===(o=r(t))&&c?c.p(t,n):(c.d(1),c=o(t),c&&(c.c(),c.m(e,i))),t[1]?f?f.p(t,n):(f=V(t),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i:t,o:t,d(t){t&&a(e),c.d(),f&&f.d(),n[9](null)}}}function Q(t,n,e){k();let i,r=void 0,o=!1;function s(t){e(0,r=t),e(1,o=!1)}let u=[];return t.$$.update=()=>{1&t.$$.dirty&&r&&function(){const t=new CustomEvent("change",{detail:r,bubbles:!0,cancelable:!0,composed:!0});i.dispatchEvent(t)}()},[r,o,i,u,function(){e(1,o=!0),setTimeout(()=>{document.addEventListener("click",()=>{e(1,o=!1)},{once:!0})},50)},s,function(t){e(3,u=t)},function(t){e(0,r=t)},t=>s(t),function(t){M[t?"unshift":"push"](()=>{i=t,e(2,i)})}]}customElements.define("plant-number",F);class J extends X{constructor(t){super(),this.shadowRoot.innerHTML="<style>#main{background-color:#4b4b4b;color:white;border-radius:2px;position:relative;font-size:0.6em;padding:8%}#selected-value{padding:0px 2px}#item-wrapper{position:absolute;width:100%;background-color:#4b4b4b;border-radius:2px;overflow:hidden;top:0;z-index:99;left:0}.item{padding:8%;margin:0;background-color:#4b4b4b;cursor:pointer;transition:background-color 0.2s ease}.item:hover{background-color:#3d3d3d}</style>",z(this,{target:this.shadowRoot},Q,G,o,{setItems:6,setValue:7}),t&&(t.target&&u(t.target,this,t.anchor),t.props&&(this.$set(t.props),O()))}static get observedAttributes(){return["setItems","setValue"]}get setItems(){return this.$$.ctx[6]}get setValue(){return this.$$.ctx[7]}}function K(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t}function tt(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t}function nt(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t}function et(t){var n=t[0],e=t[1];return Math.sqrt(n*n+e*e)}function it(t,n){return t[0]*n[1]-t[1]*n[0]}customElements.define("plant-select",J);class rt extends Array{constructor(t=0,n=t){return super(t,n),this}get x(){return this[0]}get y(){return this[1]}set x(t){this[0]=t}set y(t){this[1]=t}set(t,n=t){return t.length?this.copy(t):(function(t,n,e){t[0]=n,t[1]=e}(this,t,n),this)}copy(t){return function(t,n){t[0]=n[0],t[1]=n[1]}(this,t),this}add(t,n){return n?K(this,t,n):K(this,this,t),this}sub(t,n){return n?tt(this,t,n):tt(this,this,t),this}multiply(t){return t.length?function(t,n,e){t[0]=n[0]*e[0],t[1]=n[1]*e[1]}(this,this,t):nt(this,this,t),this}divide(t){return t.length?function(t,n,e){t[0]=n[0]/e[0],t[1]=n[1]/e[1]}(this,this,t):nt(this,this,1/t),this}inverse(t=this){return function(t,n){t[0]=1/n[0],t[1]=1/n[1]}(this,t),this}len(){return et(this)}distance(t){return t?function(t,n){var e=n[0]-t[0],i=n[1]-t[1];return Math.sqrt(e*e+i*i)}(this,t):et(this)}squaredLen(){return this.squaredDistance()}squaredDistance(t){return t?function(t,n){var e=n[0]-t[0],i=n[1]-t[1];return e*e+i*i}(this,t):function(t){var n=t[0],e=t[1];return n*n+e*e}(this)}negate(t=this){return function(t,n){t[0]=-n[0],t[1]=-n[1]}(this,t),this}cross(t,n){return n?it(t,n):it(this,t)}scale(t){return nt(this,this,t),this}normalize(){return function(t,n){var e=n[0],i=n[1],r=e*e+i*i;r>0&&(r=1/Math.sqrt(r)),t[0]=n[0]*r,t[1]=n[1]*r}(this,this),this}dot(t){return function(t,n){return t[0]*n[0]+t[1]*n[1]}(this,t)}equals(t){return function(t,n){return t[0]===n[0]&&t[1]===n[1]}(this,t)}applyMatrix3(t){return function(t,n,e){var i=n[0],r=n[1];t[0]=e[0]*i+e[3]*r+e[6],t[1]=e[1]*i+e[4]*r+e[7]}(this,this,t),this}applyMatrix4(t){return function(t,n,e){let i=n[0],r=n[1];t[0]=e[0]*i+e[4]*r+e[12],t[1]=e[1]*i+e[5]*r+e[13]}(this,this,t),this}lerp(t,n){!function(t,n,e,i){var r=n[0],o=n[1];t[0]=r+i*(e[0]-r),t[1]=o+i*(e[1]-o)}(this,this,t,n)}clone(){return new rt(this[0],this[1])}fromArray(t,n=0){return this[0]=t[n],this[1]=t[n+1],this}toArray(t=[],n=0){return t[n]=this[0],t[n+1]=this[1],t}}var ot="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(t,n){t(n={exports:{}},n.exports)}((function(t,n){!function(){function n(t,n,e){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){o(i.response,n,e)},i.onerror=function(){console.error("could not download file")},i.send()}function e(t){var n=new XMLHttpRequest;n.open("HEAD",t,!1);try{n.send()}catch(t){}return 200<=n.status&&299>=n.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof ot&&ot.global===ot?ot:void 0,o=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype?function(t,o,s){var u=r.URL||r.webkitURL,a=document.createElement("a");o=o||t.name||"download",a.download=o,a.rel="noopener","string"==typeof t?(a.href=t,a.origin===location.origin?i(a):e(a.href)?n(t,o,s):i(a,a.target="_blank")):(a.href=u.createObjectURL(t),setTimeout((function(){u.revokeObjectURL(a.href)}),4e4),setTimeout((function(){i(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,r,o){if(r=r||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,n){return void 0===n?n={autoBom:!1}:"object"!=typeof n&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),r);else if(e(t))n(t,r,o);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout((function(){i(s)}))}}:function(t,e,i,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof t)return n(t,e,i);var s="application/octet-stream"===t.type,u=/constructor/i.test(r.HTMLElement)||r.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&u)&&"object"==typeof FileReader){var h=new FileReader;h.onloadend=function(){var t=h.result;t=a?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},h.readAsDataURL(t)}else{var c=r.URL||r.webkitURL,l=c.createObjectURL(t);o?o.location=l:location.href=l,o=null,setTimeout((function(){c.revokeObjectURL(l)}),4e4)}});r.saveAs=o.saveAs=o,t.exports=o}()}));function st(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ut(t,n,e){return n&&st(t.prototype,n),e&&st(t,e),t}function at(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}function ht(t){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ct(t,n){return(ct=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function lt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function ft(t,n,e){return(ft=lt()?Reflect.construct:function(t,n,e){var i=[null];i.push.apply(i,n);var r=new(Function.bind.apply(t,i));return e&&ct(r,e.prototype),r}).apply(null,arguments)}function dt(t){var n="function"==typeof Map?new Map:void 0;return(dt=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return ft(t,arguments,ht(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),ct(e,t)})(t)}function pt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vt(t){var n=t.length-1;return t.map((function(t,e,i){if(0===e)return{rx:.4*i[e+1].x*0,ry:t.y+.4*(i[e+1].y-t.y)*0};if(e===n)return{lx:i[e-1].x+.4*(t.x-i[e-1].x)*2,ly:i[e-1].y+.4*(t.y-i[e-1].y)*2};if(t.y>i[e+1].y&&t.y>i[e-1].y||t.y<i[e+1].y&&t.y<i[e-1].y)return{lx:i[e-1].x+.4*(t.x-i[e-1].x),ly:t.y,rx:t.x+.4*(i[e+1].x-t.x),ry:t.y};var r={x:i[e-1].x-i[e+1].x,y:i[e-1].y-i[e+1].y},o=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2));r.x/=o,r.y/=o;var s=i[e+1].x-t.x,u=t.x-i[e-1].x;return{lx:t.x+r.x*u*.4,ly:t.y+r.y*u*.4,rx:t.x-r.x*s*.4,ry:t.y-r.y*s*.4}}))}var yt=function(t,n){var e=vt(n);n.forEach((function(n,i,r){i<r.length-1&&(t.moveTo(n.x,n.y),t.bezierCurveTo(e[i].rx,e[i].ry,e[i+1].lx,e[i+1].ly,r[i+1].x,r[i+1].y),t.stroke())}))};function mt(t){var n=t[0],e=t[1],i=t[2];return Math.sqrt(n*n+e*e+i*i)}function bt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function gt(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t}function xt(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t}function wt(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t}function kt(t){var n=t[0],e=t[1],i=t[2];return n*n+e*e+i*i}function $t(t,n){var e=n[0],i=n[1],r=n[2],o=e*e+i*i+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o,t}function Mt(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function At(t,n,e){var i=n[0],r=n[1],o=n[2],s=e[0],u=e[1],a=e[2];return t[0]=r*a-o*u,t[1]=o*s-i*a,t[2]=i*u-r*s,t}var Et,Tt,qt=(Et=[0,0,0],Tt=[0,0,0],function(t,n){bt(Et,t),bt(Tt,n),$t(Et,Et),$t(Tt,Tt);var e=Mt(Et,Tt);return e>1?0:e<-1?Math.PI:Math.acos(e)}),Ct=function(t){function n(n,e,i){var r;return void 0===n&&(n=0),void 0===e&&(e=n),void 0===i&&(i=n),(r=t.call(this,n,e,i)||this).constant=void 0,pt(r)||pt(r)}at(n,t);var e=n.prototype;return e.set=function(t,n,e){return void 0===n&&(n=t),void 0===e&&(e=t),t.length?this.copy(t):(function(t,n,e,i){t[0]=n,t[1]=e,t[2]=i}(this,t,n,e),this)},e.copy=function(t){return bt(this,t),this},e.add=function(t,n){return n?gt(this,t,n):gt(this,this,t),this},e.sub=function(t,n){return n?xt(this,t,n):xt(this,this,t),this},e.multiply=function(t){var n,e;return t.length?((n=this)[0]=this[0]*(e=t)[0],n[1]=this[1]*e[1],n[2]=this[2]*e[2]):wt(this,this,t),this},e.divide=function(t){var n,e;return t.length?((n=this)[0]=this[0]/(e=t)[0],n[1]=this[1]/e[1],n[2]=this[2]/e[2]):wt(this,this,1/t),this},e.inverse=function(t){var n,e;return void 0===t&&(t=this),(n=this)[0]=1/(e=t)[0],n[1]=1/e[1],n[2]=1/e[2],this},e.len=function(){return mt(this)},e.distance=function(t){return t?(e=(n=t)[0]-this[0],i=n[1]-this[1],r=n[2]-this[2],Math.sqrt(e*e+i*i+r*r)):mt(this);var n,e,i,r},e.squaredLen=function(){return kt(this)},e.squaredDistance=function(t){return t?(e=(n=t)[0]-this[0])*e+(i=n[1]-this[1])*i+(r=n[2]-this[2])*r:kt(this);var n,e,i,r},e.negate=function(t){var n,e;return void 0===t&&(t=this),(n=this)[0]=-(e=t)[0],n[1]=-e[1],n[2]=-e[2],this},e.cross=function(t,n){return n?At(this,t,n):At(this,this,t),this},e.scale=function(t){return wt(this,this,t),this},e.normalize=function(){return $t(this,this),this},e.dot=function(t){return Mt(this,t)},e.equals=function(t){return this[0]===(n=t)[0]&&this[1]===n[1]&&this[2]===n[2];var n},e.applyMatrix4=function(t){var n,e,i,r,o,s;return(n=this)[0]=((e=t)[0]*(i=this[0])+e[4]*(r=this[1])+e[8]*(o=this[2])+e[12])/(s=(s=e[3]*i+e[7]*r+e[11]*o+e[15])||1),n[1]=(e[1]*i+e[5]*r+e[9]*o+e[13])/s,n[2]=(e[2]*i+e[6]*r+e[10]*o+e[14])/s,this},e.scaleRotateMatrix4=function(t){var n,e,i,r,o,s;return(n=this)[0]=((e=t)[0]*(i=this[0])+e[4]*(r=this[1])+e[8]*(o=this[2]))/(s=(s=e[3]*i+e[7]*r+e[11]*o+e[15])||1),n[1]=(e[1]*i+e[5]*r+e[9]*o)/s,n[2]=(e[2]*i+e[6]*r+e[10]*o)/s,this},e.applyQuaternion=function(t){return function(t,n,e){var i=n[0],r=n[1],o=n[2],s=e[0],u=e[1],a=e[2],h=u*o-a*r,c=a*i-s*o,l=s*r-u*i,f=u*l-a*c,d=a*h-s*l,p=s*c-u*h,v=2*e[3];c*=v,l*=v,d*=2,p*=2,t[0]=i+(h*=v)+(f*=2),t[1]=r+c+d,t[2]=o+l+p}(this,this,t),this},e.angle=function(t){return qt(this,t)},e.lerp=function(t,n){return function(t,n,e,i){var r=n[0],o=n[1],s=n[2];t[0]=r+i*(e[0]-r),t[1]=o+i*(e[1]-o),t[2]=s+i*(e[2]-s)}(this,this,t,n),this},e.clone=function(){return new n(this[0],this[1],this[2])},e.fromArray=function(t,n){return void 0===n&&(n=0),this[0]=t[n],this[1]=t[n+1],this[2]=t[n+2],this},e.toArray=function(t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t},e.transformDirection=function(t){var n=this[0],e=this[1],i=this[2];return this[0]=t[0]*n+t[4]*e+t[8]*i,this[1]=t[1]*n+t[5]*e+t[9]*i,this[2]=t[2]*n+t[6]*e+t[10]*i,this.normalize()},ut(n,[{key:"x",get:function(){return this[0]},set:function(t){this[0]=t}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=t}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=t}}]),n}(dt(Array));new Ct;function Rt(t,n,e){var i=n[0],r=n[1],o=n[2],s=n[3],u=n[4],a=n[5],h=n[6],c=n[7],l=n[8],f=n[9],d=n[10],p=n[11],v=n[12],y=n[13],m=n[14],b=n[15],g=e[0],x=e[1],w=e[2],k=e[3];return t[0]=g*i+x*u+w*l+k*v,t[1]=g*r+x*a+w*f+k*y,t[2]=g*o+x*h+w*d+k*m,t[3]=g*s+x*c+w*p+k*b,t[4]=(g=e[4])*i+(x=e[5])*u+(w=e[6])*l+(k=e[7])*v,t[5]=g*r+x*a+w*f+k*y,t[6]=g*o+x*h+w*d+k*m,t[7]=g*s+x*c+w*p+k*b,t[8]=(g=e[8])*i+(x=e[9])*u+(w=e[10])*l+(k=e[11])*v,t[9]=g*r+x*a+w*f+k*y,t[10]=g*o+x*h+w*d+k*m,t[11]=g*s+x*c+w*p+k*b,t[12]=(g=e[12])*i+(x=e[13])*u+(w=e[14])*l+(k=e[15])*v,t[13]=g*r+x*a+w*f+k*y,t[14]=g*o+x*h+w*d+k*m,t[15]=g*s+x*c+w*p+k*b,t}function _t(t,n){var e=n[4],i=n[5],r=n[6],o=n[8],s=n[9],u=n[10];return t[0]=Math.hypot(n[0],n[1],n[2]),t[1]=Math.hypot(e,i,r),t[2]=Math.hypot(o,s,u),t}new Ct;var Ot,St=(Ot=[0,0,0],function(t,n){var e=Ot;_t(e,n);var i=1/e[0],r=1/e[1],o=1/e[2],s=n[0]*i,u=n[1]*r,a=n[2]*o,h=n[4]*i,c=n[5]*r,l=n[6]*o,f=n[8]*i,d=n[9]*r,p=n[10]*o,v=s+c+p,y=0;return v>0?(y=2*Math.sqrt(v+1),t[3]=.25*y,t[0]=(l-d)/y,t[1]=(f-a)/y,t[2]=(u-h)/y):s>c&&s>p?(y=2*Math.sqrt(1+s-c-p),t[3]=(l-d)/y,t[0]=.25*y,t[1]=(u+h)/y,t[2]=(f+a)/y):c>p?(y=2*Math.sqrt(1+c-s-p),t[3]=(f-a)/y,t[0]=(u+h)/y,t[1]=.25*y,t[2]=(l+d)/y):(y=2*Math.sqrt(1+p-s-c),t[3]=(u-h)/y,t[0]=(f+a)/y,t[1]=(l+d)/y,t[2]=.25*y),t}),Lt=function(t){function n(n,e,i,r,o,s,u,a,h,c,l,f,d,p,v,y){var m;return void 0===n&&(n=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=1),void 0===u&&(u=0),void 0===a&&(a=0),void 0===h&&(h=0),void 0===c&&(c=0),void 0===l&&(l=1),void 0===f&&(f=0),void 0===d&&(d=0),void 0===p&&(p=0),void 0===v&&(v=0),void 0===y&&(y=1),pt(m=t.call(this,n,e,i,r,o,s,u,a,h,c,l,f,d,p,v,y)||this)||pt(m)}at(n,t);var e=n.prototype;return e.set=function(t,n,e,i,r,o,s,u,a,h,c,l,f,d,p,v){return t.length?this.copy(t):(function(t,n,e,i,r,o,s,u,a,h,c,l,f,d,p,v,y){t[0]=n,t[1]=e,t[2]=i,t[3]=r,t[4]=o,t[5]=s,t[6]=u,t[7]=a,t[8]=h,t[9]=c,t[10]=l,t[11]=f,t[12]=d,t[13]=p,t[14]=v,t[15]=y}(this,t,n,e,i,r,o,s,u,a,h,c,l,f,d,p,v),this)},e.translate=function(t,n){return void 0===n&&(n=this),function(t,n,e){var i,r,o,s,u,a,h,c,l,f,d,p,v=e[0],y=e[1],m=e[2];n===t?(t[12]=n[0]*v+n[4]*y+n[8]*m+n[12],t[13]=n[1]*v+n[5]*y+n[9]*m+n[13],t[14]=n[2]*v+n[6]*y+n[10]*m+n[14],t[15]=n[3]*v+n[7]*y+n[11]*m+n[15]):(r=n[1],o=n[2],s=n[3],u=n[4],a=n[5],h=n[6],c=n[7],l=n[8],f=n[9],d=n[10],p=n[11],t[0]=i=n[0],t[1]=r,t[2]=o,t[3]=s,t[4]=u,t[5]=a,t[6]=h,t[7]=c,t[8]=l,t[9]=f,t[10]=d,t[11]=p,t[12]=i*v+u*y+l*m+n[12],t[13]=r*v+a*y+f*m+n[13],t[14]=o*v+h*y+d*m+n[14],t[15]=s*v+c*y+p*m+n[15])}(this,n,t),this},e.rotate=function(t,n,e){return void 0===e&&(e=this),function(t,n,e,i){var r,o,s,u,a,h,c,l,f,d,p,v,y,m,b,g,x,w,k,$,M,A,E,T,q=i[0],C=i[1],R=i[2],_=Math.hypot(q,C,R);Math.abs(_)<1e-6||(q*=_=1/_,C*=_,R*=_,r=Math.sin(e),o=Math.cos(e),a=n[1],h=n[2],c=n[3],f=n[5],d=n[6],p=n[7],y=n[9],m=n[10],b=n[11],k=q*C*(s=1-o)-R*r,$=C*C*s+o,M=R*C*s+q*r,A=q*R*s+C*r,E=C*R*s-q*r,T=R*R*s+o,t[0]=(u=n[0])*(g=q*q*s+o)+(l=n[4])*(x=C*q*s+R*r)+(v=n[8])*(w=R*q*s-C*r),t[1]=a*g+f*x+y*w,t[2]=h*g+d*x+m*w,t[3]=c*g+p*x+b*w,t[4]=u*k+l*$+v*M,t[5]=a*k+f*$+y*M,t[6]=h*k+d*$+m*M,t[7]=c*k+p*$+b*M,t[8]=u*A+l*E+v*T,t[9]=a*A+f*E+y*T,t[10]=h*A+d*E+m*T,t[11]=c*A+p*E+b*T,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]))}(this,e,t,n),this},e.scale=function(t,n){return void 0===n&&(n=this),function(t,n,e){var i=e[0],r=e[1],o=e[2];t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=n[3]*i,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]}(this,n,"number"==typeof t?[t,t,t]:t),this},e.multiply=function(t,n){return n?Rt(this,t,n):Rt(this,this,t),this},e.identity=function(){var t;return(t=this)[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},e.copy=function(t){var n,e;return(n=this)[0]=(e=t)[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],this},e.fromPerspective=function(t){var n,e,i,r,o,s,u=void 0===t?{}:t;return n=this,e=u.aspect,i=u.near,r=u.far,o=1/Math.tan(u.fov/2),s=1/(i-r),n[0]=o/e,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=o,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=(r+i)*s,n[11]=-1,n[12]=0,n[13]=0,n[14]=2*r*i*s,n[15]=0,this},e.fromOrthogonal=function(t){return h=1/((r=t.bottom)-(o=t.top)),c=1/((s=t.near)-(u=t.far)),(n=this)[0]=-2*(a=1/((e=t.left)-(i=t.right))),n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*h,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*c,n[11]=0,n[12]=(e+i)*a,n[13]=(o+r)*h,n[14]=(u+s)*c,n[15]=1,this;var n,e,i,r,o,s,u,a,h,c},e.fromQuaternion=function(t){return function(t,n){var e=n[0],i=n[1],r=n[2],o=n[3],s=e+e,u=i+i,a=r+r,h=e*s,c=i*s,l=i*u,f=r*s,d=r*u,p=r*a,v=o*s,y=o*u,m=o*a;t[0]=1-l-p,t[1]=c+m,t[2]=f-y,t[3]=0,t[4]=c-m,t[5]=1-h-p,t[6]=d+v,t[7]=0,t[8]=f+y,t[9]=d-v,t[10]=1-h-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,t),this},e.setPosition=function(t){return this.x=t[0],this.y=t[1],this.z=t[2],this},e.inverse=function(t){var n,e,i,r,o,s,u,a,h,c,l,f,d,p,v,y,m,b,g,x,w,k,$,M,A,E,T,q,C,R,_;return void 0===t&&(t=this),n=this,(_=(g=(i=(e=t)[0])*(a=e[5])-(r=e[1])*(u=e[4]))*(R=(d=e[10])*(b=e[15])-(p=e[11])*(m=e[14]))-(x=i*(h=e[6])-(o=e[2])*u)*(C=(f=e[9])*b-p*(y=e[13]))+(w=i*(c=e[7])-(s=e[3])*u)*(q=f*m-d*y)+(k=r*h-o*a)*(T=(l=e[8])*b-p*(v=e[12]))-($=r*c-s*a)*(E=l*m-d*v)+(M=o*c-s*h)*(A=l*y-f*v))&&(n[0]=(a*R-h*C+c*q)*(_=1/_),n[1]=(o*C-r*R-s*q)*_,n[2]=(y*M-m*$+b*k)*_,n[3]=(d*$-f*M-p*k)*_,n[4]=(h*T-u*R-c*E)*_,n[5]=(i*R-o*T+s*E)*_,n[6]=(m*w-v*M-b*x)*_,n[7]=(l*M-d*w+p*x)*_,n[8]=(u*C-a*T+c*A)*_,n[9]=(r*T-i*C-s*A)*_,n[10]=(v*$-y*w+b*g)*_,n[11]=(f*w-l*$-p*g)*_,n[12]=(a*E-u*q-h*A)*_,n[13]=(i*q-r*E+o*A)*_,n[14]=(y*x-v*k-m*g)*_,n[15]=(l*k-f*x+d*g)*_),this},e.compose=function(t,n,e){return function(t,n,e,i){var r=n[0],o=n[1],s=n[2],u=n[3],a=r+r,h=o+o,c=s+s,l=r*a,f=r*h,d=r*c,p=o*h,v=o*c,y=s*c,m=u*a,b=u*h,g=u*c,x=i[0],w=i[1],k=i[2];t[0]=(1-(p+y))*x,t[1]=(f+g)*x,t[2]=(d-b)*x,t[3]=0,t[4]=(f-g)*w,t[5]=(1-(l+y))*w,t[6]=(v+m)*w,t[7]=0,t[8]=(d+b)*k,t[9]=(v-m)*k,t[10]=(1-(l+p))*k,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1}(this,t,n,e),this},e.getRotation=function(t){return St(t,this),this},e.getTranslation=function(t){var n;return(n=t)[0]=this[12],n[1]=this[13],n[2]=this[14],this},e.getScaling=function(t){return _t(t,this),this},e.getMaxScaleOnAxis=function(){return t=this[0],n=this[1],e=this[2],i=this[4],r=this[5],o=this[6],s=this[8],u=this[9],a=this[10],Math.sqrt(Math.max(t*t+n*n+e*e,i*i+r*r+o*o,s*s+u*u+a*a));var t,n,e,i,r,o,s,u,a},e.lookAt=function(t,n,e){return function(t,n,e,i){var r=n[0],o=n[1],s=n[2],u=i[0],a=i[1],h=i[2],c=r-e[0],l=o-e[1],f=s-e[2],d=c*c+l*l+f*f;0===d?f=1:(c*=d=1/Math.sqrt(d),l*=d,f*=d);var p=a*f-h*l,v=h*c-u*f,y=u*l-a*c;0==(d=p*p+v*v+y*y)&&(h?u+=1e-6:a?h+=1e-6:a+=1e-6,d=(p=a*f-h*l)*p+(v=h*c-u*f)*v+(y=u*l-a*c)*y),v*=d=1/Math.sqrt(d),y*=d,t[0]=p*=d,t[1]=v,t[2]=y,t[3]=0,t[4]=l*y-f*v,t[5]=f*p-c*y,t[6]=c*v-l*p,t[7]=0,t[8]=c,t[9]=l,t[10]=f,t[11]=0,t[12]=r,t[13]=o,t[14]=s,t[15]=1}(this,t,n,e),this},e.determinant=function(){return((n=(t=this)[0])*(s=t[5])-(e=t[1])*(o=t[4]))*((l=t[10])*(y=t[15])-(f=t[11])*(v=t[14]))-(n*(u=t[6])-(i=t[2])*o)*((c=t[9])*y-f*(p=t[13]))+(n*(a=t[7])-(r=t[3])*o)*(c*v-l*p)+(e*u-i*s)*((h=t[8])*y-f*(d=t[12]))-(e*a-r*s)*(h*v-l*d)+(i*a-r*u)*(h*p-c*d);var t,n,e,i,r,o,s,u,a,h,c,l,f,d,p,v,y},e.fromArray=function(t,n){return void 0===n&&(n=0),this[0]=t[n],this[1]=t[n+1],this[2]=t[n+2],this[3]=t[n+3],this[4]=t[n+4],this[5]=t[n+5],this[6]=t[n+6],this[7]=t[n+7],this[8]=t[n+8],this[9]=t[n+9],this[10]=t[n+10],this[11]=t[n+11],this[12]=t[n+12],this[13]=t[n+13],this[14]=t[n+14],this[15]=t[n+15],this},e.toArray=function(t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t[n+3]=this[3],t[n+4]=this[4],t[n+5]=this[5],t[n+6]=this[6],t[n+7]=this[7],t[n+8]=this[8],t[n+9]=this[9],t[n+10]=this[10],t[n+11]=this[11],t[n+12]=this[12],t[n+13]=this[13],t[n+14]=this[14],t[n+15]=this[15],t},ut(n,[{key:"x",get:function(){return this[12]},set:function(t){this[12]=t}},{key:"y",get:function(){return this[13]},set:function(t){this[13]=t}},{key:"z",get:function(){return this[14]},set:function(t){this[14]=t}},{key:"w",get:function(){return this[15]},set:function(t){this[15]=t}}]),n}(dt(Array));function Pt(t,n,e){var i=n[0],r=n[1],o=n[2],s=n[3],u=e[0],a=e[1],h=e[2],c=e[3];return t[0]=i*c+s*u+r*h-o*a,t[1]=r*c+s*a+o*u-i*h,t[2]=o*c+s*h+i*a-r*u,t[3]=s*c-i*u-r*a-o*h,t}var jt=function(t){function n(n,e,i,r){var o;return void 0===n&&(n=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),(o=t.call(this,n,e,i,r)||this).onChange=void 0,o.onChange=function(){},pt(o)||pt(o)}at(n,t);var e=n.prototype;return e.identity=function(){var t;return(t=this)[0]=0,t[1]=0,t[2]=0,t[3]=1,this.onChange(),this},e.set=function(t,n,e,i){return t.length?this.copy(t):(function(t,n,e,i,r){t[0]=n,t[1]=e,t[2]=i,t[3]=r}(this,t,n,e,i),this.onChange(),this)},e.rotateX=function(t){return function(t,n,e){e*=.5;var i=n[0],r=n[1],o=n[2],s=n[3],u=Math.sin(e),a=Math.cos(e);t[0]=i*a+s*u,t[1]=r*a+o*u,t[2]=o*a-r*u,t[3]=s*a-i*u}(this,this,t),this.onChange(),this},e.rotateY=function(t){return function(t,n,e){e*=.5;var i=n[0],r=n[1],o=n[2],s=n[3],u=Math.sin(e),a=Math.cos(e);t[0]=i*a-o*u,t[1]=r*a+s*u,t[2]=o*a+i*u,t[3]=s*a-r*u}(this,this,t),this.onChange(),this},e.rotateZ=function(t){return function(t,n,e){e*=.5;var i=n[0],r=n[1],o=n[2],s=n[3],u=Math.sin(e),a=Math.cos(e);t[0]=i*a+r*u,t[1]=r*a-i*u,t[2]=o*a+s*u,t[3]=s*a-o*u}(this,this,t),this.onChange(),this},e.inverse=function(t){var n,e,i,r,o,s,u,a;return void 0===t&&(t=this),(n=this)[0]=-(i=(e=t)[0])*(a=(u=i*i+(r=e[1])*r+(o=e[2])*o+(s=e[3])*s)?1/u:0),n[1]=-r*a,n[2]=-o*a,n[3]=s*a,this.onChange(),this},e.conjugate=function(t){var n,e;return void 0===t&&(t=this),(n=this)[0]=-(e=t)[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3],this.onChange(),this},e.copy=function(t){return(n=this)[0]=(e=t)[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],this.onChange(),this;var n,e},e.normalize=function(t){return void 0===t&&(t=this),(s=(e=(n=t)[0])*e+(i=n[1])*i+(r=n[2])*r+(o=n[3])*o)>0&&(s=1/Math.sqrt(s)),this[0]=e*s,this[1]=i*s,this[2]=r*s,this[3]=o*s,this.onChange(),this;var n,e,i,r,o,s},e.multiply=function(t,n){return n?Pt(this,t,n):Pt(this,this,t),this.onChange(),this},e.dot=function(t){return(n=this)[0]*(e=t)[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3];var n,e},e.fromMatrix3=function(t){return function(t,n){var e,i=n[0]+n[4]+n[8];if(i>0)e=Math.sqrt(i+1),t[3]=.5*e,t[0]=(n[5]-n[7])*(e=.5/e),t[1]=(n[6]-n[2])*e,t[2]=(n[1]-n[3])*e;else{var r=0;n[4]>n[0]&&(r=1),n[8]>n[3*r+r]&&(r=2);var o=(r+1)%3,s=(r+2)%3;e=Math.sqrt(n[3*r+r]-n[3*o+o]-n[3*s+s]+1),t[r]=.5*e,t[3]=(n[3*o+s]-n[3*s+o])*(e=.5/e),t[o]=(n[3*o+r]+n[3*r+o])*e,t[s]=(n[3*s+r]+n[3*r+s])*e}}(this,t),this.onChange(),this},e.fromEuler=function(t){return function(t,n,e){void 0===e&&(e="YXZ");var i=Math.sin(.5*n[0]),r=Math.cos(.5*n[0]),o=Math.sin(.5*n[1]),s=Math.cos(.5*n[1]),u=Math.sin(.5*n[2]),a=Math.cos(.5*n[2]);"XYZ"===e?(t[0]=i*s*a+r*o*u,t[1]=r*o*a-i*s*u,t[2]=r*s*u+i*o*a,t[3]=r*s*a-i*o*u):"YXZ"===e?(t[0]=i*s*a+r*o*u,t[1]=r*o*a-i*s*u,t[2]=r*s*u-i*o*a,t[3]=r*s*a+i*o*u):"ZXY"===e?(t[0]=i*s*a-r*o*u,t[1]=r*o*a+i*s*u,t[2]=r*s*u+i*o*a,t[3]=r*s*a-i*o*u):"ZYX"===e?(t[0]=i*s*a-r*o*u,t[1]=r*o*a+i*s*u,t[2]=r*s*u-i*o*a,t[3]=r*s*a+i*o*u):"YZX"===e?(t[0]=i*s*a+r*o*u,t[1]=r*o*a+i*s*u,t[2]=r*s*u-i*o*a,t[3]=r*s*a-i*o*u):"XZY"===e&&(t[0]=i*s*a-r*o*u,t[1]=r*o*a-i*s*u,t[2]=r*s*u+i*o*a,t[3]=r*s*a+i*o*u)}(this,t,t.order),this},e.fromAxisAngle=function(t,n){return function(t,n,e){e*=.5;var i=Math.sin(e);t[0]=i*n[0],t[1]=i*n[1],t[2]=i*n[2],t[3]=Math.cos(e)}(this,t,n),this},e.slerp=function(t,n){return function(t,n,e,i){var r,o,s,u,a,h=n[0],c=n[1],l=n[2],f=n[3],d=e[0],p=e[1],v=e[2],y=e[3];(o=h*d+c*p+l*v+f*y)<0&&(o=-o,d=-d,p=-p,v=-v,y=-y),1-o>1e-6?(r=Math.acos(o),s=Math.sin(r),u=Math.sin((1-i)*r)/s,a=Math.sin(i*r)/s):(u=1-i,a=i),t[0]=u*h+a*d,t[1]=u*c+a*p,t[2]=u*l+a*v,t[3]=u*f+a*y}(this,this,t,n),this},e.fromArray=function(t,n){return void 0===n&&(n=0),this[0]=t[n],this[1]=t[n+1],this[2]=t[n+2],this[3]=t[n+3],this},e.toArray=function(t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=this[0],t[n+1]=this[1],t[n+2]=this[2],t[n+3]=this[3],t},ut(n,[{key:"x",get:function(){return this[0]},set:function(t){this[0]=t,this.onChange()}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=t,this.onChange()}},{key:"z",get:function(){return this[2]},set:function(t){this[2]=t,this.onChange()}},{key:"w",get:function(){return this[3]},set:function(t){this[3]=t,this.onChange()}}]),n}(dt(Array));new Lt,new Lt,new Ct,new Ct,new Uint8Array(4);function zt(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t}function Xt(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t}function Yt(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t}function Ht(t){var n=t[0],e=t[1];return Math.sqrt(n*n+e*e)}function It(t,n){return t[0]*n[1]-t[1]*n[0]}var Ut=function(t){function n(n,e){var i;return void 0===n&&(n=0),void 0===e&&(e=n),pt(i=t.call(this,n,e)||this)||pt(i)}at(n,t);var e=n.prototype;return e.set=function(t,n){return void 0===n&&(n=t),t.length?this.copy(t):(function(t,n,e){t[0]=n,t[1]=e}(this,t,n),this)},e.copy=function(t){var n,e;return(n=this)[0]=(e=t)[0],n[1]=e[1],this},e.add=function(t,n){return n?zt(this,t,n):zt(this,this,t),this},e.sub=function(t,n){return n?Xt(this,t,n):Xt(this,this,t),this},e.multiply=function(t){var n,e;return t.length?((n=this)[0]=this[0]*(e=t)[0],n[1]=this[1]*e[1]):Yt(this,this,t),this},e.divide=function(t){var n,e;return t.length?((n=this)[0]=this[0]/(e=t)[0],n[1]=this[1]/e[1]):Yt(this,this,1/t),this},e.inverse=function(t){var n,e;return void 0===t&&(t=this),(n=this)[0]=1/(e=t)[0],n[1]=1/e[1],this},e.len=function(){return Ht(this)},e.distance=function(t){return t?(e=(n=t)[0]-this[0],i=n[1]-this[1],Math.sqrt(e*e+i*i)):Ht(this);var n,e,i},e.squaredLen=function(){return this.squaredDistance()},e.squaredDistance=function(t){return t?(e=(n=t)[0]-this[0])*e+(i=n[1]-this[1])*i:function(t){var n=t[0],e=t[1];return n*n+e*e}(this);var n,e,i},e.negate=function(t){var n,e;return void 0===t&&(t=this),(n=this)[0]=-(e=t)[0],n[1]=-e[1],this},e.cross=function(t,n){return n?It(t,n):It(this,t)},e.scale=function(t){return Yt(this,this,t),this},e.normalize=function(){var t,n,e,i;return(i=(n=(t=this)[0])*n+(e=t[1])*e)>0&&(i=1/Math.sqrt(i)),this[0]=t[0]*i,this[1]=t[1]*i,this},e.dot=function(t){return this[0]*(n=t)[0]+this[1]*n[1];var n},e.equals=function(t){return this[0]===(n=t)[0]&&this[1]===n[1];var n},e.applyMatrix3=function(t){var n,e,i,r;return(n=this)[0]=(e=t)[0]*(i=this[0])+e[3]*(r=this[1])+e[6],n[1]=e[1]*i+e[4]*r+e[7],this},e.applyMatrix4=function(t){var n,e,i,r;return(n=this)[0]=(e=t)[0]*(i=this[0])+e[4]*(r=this[1])+e[12],n[1]=e[1]*i+e[5]*r+e[13],this},e.lerp=function(t,n){!function(t,n,e,i){var r=n[0],o=n[1];t[0]=r+i*(e[0]-r),t[1]=o+i*(e[1]-o)}(this,this,t,n)},e.clone=function(){return new n(this[0],this[1])},e.fromArray=function(t,n){return void 0===n&&(n=0),this[0]=t[n],this[1]=t[n+1],this},e.toArray=function(t,n){return void 0===t&&(t=[]),void 0===n&&(n=0),t[n]=this[0],t[n+1]=this[1],t},ut(n,[{key:"x",get:function(){return this[0]},set:function(t){this[0]=t}},{key:"y",get:function(){return this[1]},set:function(t){this[1]=t}}]),n}(dt(Array));new Ct,new Ut,new Ut,new Ut,new Ut,new Ut,new Ct,new Ct,new Ct,new Ct,new Ct,new Ct,new Ct,new Ct,new Ct,new Ct,new Ct,new Lt,new Ct,new Ct,new Ct,new Ct,new Ct,new jt,new Ct,new Ct,new jt,new Ct,new Lt,new Ct,new Ct,new Ct,new Ct,new Ct,new jt,new jt,new jt,new jt,new Lt,new Lt;const{window:Dt}=P;function Ft(n){let e,r,o,c;return{c(){e=h("div"),r=h("canvas"),this.c=t,d(r,"width",n[3]),d(r,"height",n[4]),d(e,"id","main")},m(t,i){u(t,e,i),s(e,r),n[10](r),o||(c=[f(Dt,"mouseup",n[9]),f(e,"mouseover",n[11]),f(e,"mouseleave",n[12]),f(e,"mousemove",n[5]),f(e,"mousedown",n[6])],o=!0)},p(t,[n]){8&n&&d(r,"width",t[3]),16&n&&d(r,"height",t[4])},i:t,o:t,d(t){t&&a(e),n[10](null),o=!1,i(c)}}}function Bt(t,n,e){let i,r,{points:o=[{x:0,y:1,locked:!0},{x:1,y:0,locked:!0}]}=n,s=!1,u=void 0;const a=new rt(0,0),h=new rt(0,0),c=new rt(0,0);let l=200,f=200;function d(){r.clearRect(0,0,l,f),r.lineWidth=1,r.strokeStyle="white",r.fillStyle="white";const t=o.sort((t,n)=>t.x>n.x?1:-1).map(({x:t,y:n,locked:e=!1})=>({x:t*l,y:n*f,locked:e}));yt(r,t),s&&(requestAnimationFrame(d),p(t))}const p=t=>t.forEach((t,n)=>{r.beginPath();const e=Math.abs(o[n].x-a.x)+Math.abs(o[n].y-a.y);t.locked||(e<.1?(r.arc(t.x,t.y,5,0,2*Math.PI),r.fillStyle="white",r.fill()):(r.arc(t.x,t.y,4,0,2*Math.PI),r.fillStyle="#4b4b4b",r.fill(),r.arc(t.x,t.y,4,0,2*Math.PI),r.lineWidth=2,r.stroke()))});w(()=>{r=i.getContext("2d");const{devicePixelRatio:t}=window;t&&(e(3,l=200*t),e(4,f=200*t)),setTimeout(d,50)});return t.$$set=t=>{"points"in t&&e(8,o=t.points)},[i,s,u,l,f,t=>{s&&(a.x=t.offsetX/200,a.y=t.offsetY/200,u&&(e(2,u.x=a.x,u),e(2,u.y=a.y,u)))},t=>{if(u)o.splice(o.indexOf(u),1);else{const n=o.map((t,n)=>({i:n,d:Math.abs(t.x-a.x)+Math.abs(t.y-a.y)})).sort((t,n)=>t.d<n.d?-1:1);if(n[0].d<.1&&!o[n[0].i].locked)e(2,u=o[n[0].i]),c.x=u.x,c.y=u.y,h.x=t.offsetX/l,h.y=(f-t.offsetY)/f;else{const n={x:a.x,y:a.y,locked:!1};e(2,u=n),c.x=u.x,c.y=u.y,h.x=t.offsetX/l,h.y=(f-t.offsetY)/f,o.push(n)}}},d,o,()=>{setTimeout(()=>{e(2,u=void 0)},100)},function(t){M[t?"unshift":"push"](()=>{i=t,e(0,i)})},()=>{e(1,s=!0),d()},()=>{e(1,s=!1)}]}class Zt extends X{constructor(t){super(),this.shadowRoot.innerHTML="<style>#main{width:200px;height:200px;background-color:#4b4b4b;border-radius:2px;overflow:hidden}#main>canvas{width:100%}</style>",z(this,{target:this.shadowRoot},Bt,Ft,o,{points:8}),t&&(t.target&&u(t.target,this,t.anchor),t.props&&(this.$set(t.props),O()))}static get observedAttributes(){return["points"]}get points(){return this.$$.ctx[8]}set points(t){this.$set({points:t}),O()}}customElements.define("plant-curve",Zt);const{window:Nt}=P;function Vt(n){let e,r,o,c;return{c(){e=h("div"),r=h("canvas"),this.c=t,d(r,"width",n[3]),d(r,"height",n[4]),d(e,"id","main")},m(t,i){u(t,e,i),s(e,r),n[10](r),o||(c=[f(Nt,"mouseup",n[9]),f(e,"mouseover",n[11]),f(e,"mouseleave",n[12]),f(e,"mousemove",n[5]),f(e,"mousedown",n[6])],o=!0)},p(t,[n]){8&n&&d(r,"width",t[3]),16&n&&d(r,"height",t[4])},i:t,o:t,d(t){t&&a(e),n[10](null),o=!1,i(c)}}}function Wt(t,n,e){let i,r,o,{points:s=[{x:.5,y:1,locked:!0},{x:.2,y:.6},{x:.2,y:.3},{x:.5,y:0,locked:!0}]}=n,u=!1,a=void 0;const h=new rt(0,0),c=new rt(0,0),l=new rt(0,0);let f=200,d=200;function p(){r.clearRect(0,0,f,d),r.lineWidth=1,r.strokeStyle="white",r.fillStyle="white",e(8,s=s.sort(({y:t,x:n},{y:e,x:i})=>t===e?t<.5?n>i?1:-1:n>i?-1:1:t>e?1:-1)),.5!==s[0].x&&(delete s[0].locked,e(8,s=[{x:.5,y:0,locked:!0},...s])),.5!==s[s.length-1].x&&(delete s[s.length-1].locked,e(8,s=[...s,{x:.5,y:1,locked:!0}])),e(8,s=s.sort(({y:t,x:n},{y:e,x:i})=>t===e?t<.5?n>i?-1:1:n>i?1:-1:t>e?1:-1));const t=s.map(({x:t,y:n,locked:e=!1})=>({x:t*f,y:n*d,locked:e}));var n;n=t,r.beginPath(),r.moveTo(n[0].x,n[0].y),n.forEach((t,e)=>{0!==e&&r.lineTo(n[e].x,n[e].y)}),r.closePath(),r.stroke(),function(t){r.beginPath(),r.moveTo(f-t[0].x,t[0].y),t.forEach((n,e)=>{0!==e&&r.lineTo(f-t[e].x,t[e].y)}),r.closePath(),r.fillStyle=o,r.fill()}(t),u&&(requestAnimationFrame(p),function(t){t.forEach((t,n)=>{r.beginPath();Math.abs(s[n].x-h.x)+Math.abs(s[n].y-h.y)<.1?(r.arc(t.x,t.y,5,0,2*Math.PI),r.fillStyle="white",r.fill()):(r.arc(t.x,t.y,4,0,2*Math.PI),r.fillStyle="#4b4b4b",r.fill(),r.arc(t.x,t.y,4,0,2*Math.PI),r.lineWidth=2,r.stroke())})}(t))}w(()=>{r=i.getContext("2d");const{devicePixelRatio:t}=window;t&&(e(3,f=200*t),e(4,d=200*t)),o=r.createLinearGradient(0,0,0,d),o.addColorStop(0,"#65e2a0"),o.addColorStop(1,"#337150"),setTimeout(p,50)});return t.$$set=t=>{"points"in t&&e(8,s=t.points)},[i,u,a,f,d,t=>{u&&(h.x=t.offsetX/200,h.y=t.offsetY/200,a&&(a.locked?e(2,a.x=Math.min(.5,h.x),a):(e(2,a.x=Math.min(.5,h.x),a),e(2,a.y=h.y,a))))},t=>{if(a)s.splice(s.indexOf(a),1);else{const n=s.map((t,n)=>({i:n,d:Math.abs(t.x-h.x)+Math.abs(t.y-h.y)})).sort((t,n)=>t.d<n.d?-1:1);if(n[0].d<.1)e(2,a=s[n[0].i]),l.x=a.x,l.y=a.y,c.x=t.offsetX/f,c.y=(d-t.offsetY)/d;else{const n={x:h.x,y:h.y,locked:!1};e(2,a=n),l.x=a.x,l.y=a.y,c.x=t.offsetX/f,c.y=(d-t.offsetY)/d,s.push(n)}}},p,s,()=>{setTimeout(()=>{e(2,a=void 0)},100)},function(t){M[t?"unshift":"push"](()=>{i=t,e(0,i)})},()=>{e(1,u=!0),p()},()=>{e(1,u=!1)}]}class Gt extends X{constructor(t){super(),this.shadowRoot.innerHTML="<style>#main{width:200px;height:200px;background-color:#4b4b4b;border-radius:2px;overflow:hidden}#main>canvas{width:100%}</style>",z(this,{target:this.shadowRoot},Wt,Vt,o,{points:8}),t&&(t.target&&u(t.target,this,t.anchor),t.props&&(this.$set(t.props),O()))}static get observedAttributes(){return["points"]}get points(){return this.$$.ctx[8]}set points(t){this.$set({points:t}),O()}}function Qt(t,n,e=0){if(Array.isArray(n.values)){const i=new J({target:t});return i.setItems(n.values),i.setValue(+e||e||n.values[0]),i}if("slider"===n.inputType||n.step){const i=new I({target:t});return"max"in n&&i.setAttribute("max",n.max),"min"in n&&i.setAttribute("min",n.min),"step"in n&&i.setAttribute("step",n.step),i.setAttribute("value",e||n.value),i}if("curve"===n.inputType){const e=new Zt({target:t});return"points"in n&&e.setAttribute("points",n.points),e}if("shape"===n.inputType){const e=new Gt({target:t});return"points"in n&&e.setAttribute("points",n.points),e}if("number"===n.type||"number"==typeof n.value){const i=new F({target:t});return"max"in n&&i.setAttribute("max",n.max),"min"in n&&i.setAttribute("min",n.min),"step"in n&&i.setAttribute("step",n.step),i.setAttribute("value",e),i}}customElements.define("plant-shape",Gt);export{Zt as InputCurve,F as InputNumber,J as InputSelect,Gt as InputShape,I as InputSlider,Qt as stateToElement};
